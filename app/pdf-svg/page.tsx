import { ColorTypes, PDFDocument, rgb } from "pdf-lib";
import classes from "./index.module.css";
import { FunctionComponent } from "react";
import { pdfToUrl } from "@/objects/music-rendering/pdf";

const path =
  "M0.648294 0.355315c-0.015584 0.0528215 -0.0300197 0.101542 -0.042979 0.145669 -0.000492126 0.00164042 -0.000984252 0.00328084 -0.00131234 0.00475722 -0.0183727 0.0672572 -0.042979 0.149606 -0.0593832 0.20456 -0.0359252 0.120735 -0.0651247 0.220636 -0.0853018 0.289698l-0.0369094 -0.011811c0.0426509 -0.149278 0.0853018 -0.298556 0.127953 -0.447835 -0.106463 0.0562664 -0.211286 0.0533136 -0.256398 0.00114829 -0.0198491 -0.0228018 -0.0306759 -0.0580709 -0.0250984 -0.0912073 0.00836614 -0.0490486 0.0531496 -0.100394 0.102526 -0.0949803 0.0247703 0.00278871 0.0441273 0.0114829 0.0580709 0.0247703 0.0277231 0.0264108 0.0290354 0.0615157 0.0293635 0.0754593 0.00114829 0.0326444 -0.0113189 0.0575787 -0.0182087 0.0692257 0.0423228 -0.00475722 0.0926837 -0.0180446 0.132054 -0.0544619 0.027231 -0.0949803 0.0542979 -0.189961 0.0813648 -0.284941 -0.106299 0.0562664 -0.211122 0.0533136 -0.256398 0.00114829 -0.0198491 -0.0228018 -0.0306759 -0.0580709 -0.0249344 -0.0912073C0.380906 0.0462598 0.425853 -0.0050853 0.475066 0.000328084c0.0249344 0.00278871 0.0441273 0.0114829 0.0582349 0.0247703 0.0275591 0.0264108 0.0288714 0.0613517 0.0293635 0.0754593 0.000984252 0.0326444 -0.0113189 0.0575787 -0.0182087 0.0692257 0.0434711 -0.00492126 0.0956365 -0.0188648 0.135827 -0.0579068 0.0367454 -0.0359252 0.0462598 -0.0761155 0.0511811 -0.0744751 0.0106627 0.00377297 -0.0515092 0.211942 -0.0831693 0.317913z";

const width = 500;
const height = 500;
const scale = 30;

const PDFSVG = async () => {
  const doc = await PDFDocument.create();
  doc.addPage([width, height]);
  const page = doc.getPage(0);
  const { x, y } = centerToTopLeft(width / 2, height / 2, scale);
  page.drawSvgPath(path, { x, y, color: rgb(0, 0, 0), scale });
  page.drawLine({
    start: { x: 0, y: height / 2 },
    end: { x: width, y: height / 2 },
    thickness: 1,
  });
  page.drawLine({
    start: { x: width / 2, y: 0 },
    end: { x: width / 2, y: height },
    thickness: 1,
  });
  const pdf = await doc.save();
  return <iframe src={pdfToUrl(pdf)} width={"100%"} height={"1000px"}></iframe>;
};

export default PDFSVG;

const centerToTopLeft = (x: number, y: number, scale: number) => {
  x -= scale / 2;
  y += scale / 2;
  return { x, y };
};
